<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Priston Bot Control</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1></h1>
            <div class="user-name" id="user-name" style="display: none;">
                <span id="user-name-text"></span>
            </div>
            <div class="status" id="status">
                <span class="status-dot"></span>
                <span>–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ...</span>
            </div>
        </header>

        <main>
            <!-- –í–∫–ª–∞–¥–∫–∞: –û—Å–Ω–æ–≤–Ω–æ–µ -->
            <div class="tab-content" id="tab-main">
                <!-- –†–∞–∑–¥–µ–ª –Ω–∞—Å—Ç—Ä–æ–µ–∫ (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ) -->
                <section class="card" id="settings-section" style="display: none;">
                    <h2>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
                    
                    <div class="settings-welcome" id="settings-welcome" style="display: none;">
                        <p><strong>üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</strong></p>
                        <p>–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ.</p>
                        <p><strong>–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:</strong></p>
                        <ul style="text-align: left; margin: 10px 0; padding-left: 20px;">
                            <li><strong>InitData (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):</strong> –í–≤–µ–¥–∏—Ç–µ initData –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞</li>
                            <li><strong>API Server URL:</strong> –£–∫–∞–∂–∏—Ç–µ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å CORS</li>
                            <li>–û–±—ã—á–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ Telegram</li>
                        </ul>
                        <p><strong>–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å initData:</strong></p>
                        <ol style="text-align: left; margin: 10px 0; padding-left: 20px; font-size: 12px;">
                            <li>–û—Ç–∫—Ä–æ–π—Ç–µ Mini App —á–µ—Ä–µ–∑ Telegram</li>
                            <li>–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)</li>
                            <li>–í–≤–µ–¥–∏—Ç–µ: <code>window.Telegram.WebApp.initData</code></li>
                            <li>–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ</li>
                        </ol>
                        <button class="btn btn-primary" onclick="showSettingsForm()">‚úèÔ∏è –ù–∞—Å—Ç—Ä–æ–∏—Ç—å</button>
                    </div>
                    
                    <div class="settings-form" id="settings-form">
                        <div class="form-group">
                            <label for="api-server-url">üåê API Server URL (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):</label>
                            <input type="text" id="api-server-url" placeholder="https://your-proxy.com/api" />
                            <small class="form-hint">
                                –û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –¥–ª—è –ø—Ä—è–º–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ API –∏–≥—Ä—ã<br>
                                –ò–ª–∏ —É–∫–∞–∂–∏—Ç–µ URL –≤–∞—à–µ–≥–æ –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä–∞ (CloudPub.ru, ngrok –∏ —Ç.–¥.)<br>
                                <strong>–ü—Ä–∏–º–µ—Ä:</strong> https://carelessly-pioneering-wombat.cloudpub.ru/api
                            </small>
                        </div>
                        
                        <div class="form-group">
                            <label for="manual-initdata">üîë InitData (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):</label>
                            <textarea id="manual-initdata" placeholder="–í–≤–µ–¥–∏—Ç–µ initData (query_id=...&user=...&hash=...)" rows="3" style="font-size: 12px;"></textarea>
                            <small class="form-hint">
                                <strong>–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:</strong> –í–≤–µ–¥–∏—Ç–µ initData –≤–º–µ—Å—Ç–æ —Ç–æ–∫–µ–Ω–∞<br>
                                InitData –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–≤–µ–∂–µ–≥–æ —Ç–æ–∫–µ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏<br>
                                <strong>–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å initData:</strong> –û—Ç–∫—Ä–æ–π—Ç–µ Mini App —á–µ—Ä–µ–∑ Telegram, –æ—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å (F12) –∏ –≤–≤–µ–¥–∏—Ç–µ: <code>window.Telegram.WebApp.initData</code>
                            </small>
                        </div>
                        
                        <button class="btn btn-primary" onclick="saveSettings()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
                        <button class="btn btn-secondary" onclick="resetSettings()" style="margin-top: 10px;">üîÑ –°–±—Ä–æ—Å–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
                        <button class="btn btn-danger" onclick="clearAllCache()" style="margin-top: 10px; background-color: #dc3545;">üóëÔ∏è –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞</button>
                    </div>
                    
                    <div class="settings-info" id="settings-info" style="display: none;">
                        <p><strong>–¢–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:</strong></p>
                        <div class="settings-display">
                            <div class="setting-item">
                                <span>API Server:</span>
                                <span id="current-api-url">–ù–µ —É–∫–∞–∑–∞–Ω (–ø—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ)</span>
                            </div>
                            <div class="setting-item">
                                <span>–¢–æ–∫–µ–Ω:</span>
                                <span id="current-token-status">–ù–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω</span>
                            </div>
                        </div>
                        <button class="btn btn-secondary" onclick="showSettingsForm()" style="margin-top: 10px;">‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
                    </div>
                </section>

                <!-- –†–∞–∑–¥–µ–ª —Ç—é—Ä–µ–º -->
                <section class="card" id="prison-section">
                    <h2>üèõÔ∏è –¢—é—Ä—å–º—ã</h2>
                    <div class="prison-select">
                        <select id="prison-select" onchange="loadPrisonInfo()">
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç—é—Ä—å–º—É...</option>
                        </select>
                        <select id="mode-select" onchange="loadPrisonInfo()">
                            <option value="day">–î–µ–Ω—å</option>
                            <option value="night">–ù–æ—á—å</option>
                        </select>
                    </div>
                    <div class="prison-info" id="prison-info">
                        <p>–í—ã–±–µ—Ä–∏—Ç–µ —Ç—é—Ä—å–º—É –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏</p>
                    </div>
                    <button class="btn btn-success" onclick="startPrisonWalk()" id="prison-walk-btn" disabled>
                        üöÄ –ù–∞—á–∞—Ç—å –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ
                    </button>
                </section>

                <!-- –†–∞–∑–¥–µ–ª –º–∞—Å—Ç–µ—Ä—Å–∫–∏—Ö -->
                <section class="card" id="master-section">
                    <h2>üî® –ú–∞—Å—Ç–µ—Ä—Å–∫–∏–µ</h2>
                    <div class="prison-select">
                        <select id="master-select" onchange="loadMasterInfo()">
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –º–∞—Å—Ç–µ—Ä–∞...</option>
                        </select>
                    </div>
                    <div class="prison-info" id="master-info">
                        <p>–í—ã–±–µ—Ä–∏—Ç–µ –º–∞—Å—Ç–µ—Ä–∞ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏</p>
                    </div>
                    <button class="btn btn-success" onclick="startMasterWalk()" id="master-walk-btn" disabled>
                        üöÄ –ù–∞—á–∞—Ç—å –æ–±—É—á–µ–Ω–∏–µ
                    </button>
                </section>

                <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
                <section class="card" id="stats-section">
                    <h2>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
                    <div class="stats" id="stats">
                        <div class="stat-item">
                            <span class="stat-label">–í—Å–µ–≥–æ –∞—Ç–∞–∫:</span>
                            <span class="stat-value" id="total-attacks">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">–≠–Ω–µ—Ä–≥–∏—è:</span>
                            <span class="stat-value" id="energy">-</span>
                        </div>
                    </div>
                </section>

                <!-- –ü—Ä–æ–∫–∞—á–∫–∞ –±–∏—Ü—É—Ö–∏ -->
                <section class="card" id="biceps-section">
                    <h2>üí™ –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –∏–≥—Ä–æ–∫–∞–º–∏</h2>
                    <div class="biceps-controls">
                        <div class="form-group">
                            <label for="interaction-type">–¢–∏–ø –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è:</label>
                            <select id="interaction-type" class="form-control">
                                <option value="UpgradeBiceps">üí™ –ü—Ä–æ–∫–∞—á–∞—Ç—å –±–∏—Ü—É—Ö—É</option>
                                <option value="Harknut">ü§Æ –•–∞—Ä–∫–Ω—É—Ç—å –≤ –±–∞–ª–∞–Ω–¥—É</option>
                                <option value="TossDroj">üí© –ü–æ–¥–∫–∏–Ω—É—Ç—å –≤ –ø–∞—Ä–∞—à—É</option>
                                <option value="SendFriendRequest">üë• –î–æ–±–∞–≤–∏—Ç—å –≤ –¥—Ä—É–∑—å—è</option>
                                <option value="Fight">üëä –ù–∞–ø–∞–¥–µ–Ω–∏–µ –Ω–∞ –∫–æ—Ä–µ—à–µ–π</option>
                            </select>
                            <small class="form-hint">
                                –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –∏–≥—Ä–æ–∫–æ–º<br>
                                –ö–∞–∂–¥—ã–π —Ç–∏–ø –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ –≤ –¥–µ–Ω—å –Ω–∞ –æ–¥–Ω–æ–≥–æ –∏–≥—Ä–æ–∫–∞<br>
                                –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –¥—Ä—É–∑—å—è: –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞—è–≤–∫—É –Ω–∞ –¥—Ä—É–∂–±—É (–º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑)<br>
                                <strong>–ù–∞–ø–∞–¥–µ–Ω–∏–µ –Ω–∞ –∫–æ—Ä–µ—à–µ–π: —Å—Ç–æ–∏–º–æ—Å—Ç—å 100 –ø–∞–ø–∏—Ä–æ—Å</strong>
                            </small>
                        </div>
                        <div class="form-group">
                            <label for="biceps-user-ids">ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é):</label>
                            <input type="text" id="biceps-user-ids" placeholder="8375898768, 1234567890" />
                            <small class="form-hint">
                                –í–≤–µ–¥–∏—Ç–µ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ –Ω—É–∂–Ω–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å<br>
                                –†–∞–∑–¥–µ–ª—è–π—Ç–µ –∑–∞–ø—è—Ç—ã–º–∏ –∏–ª–∏ –ø—Ä–æ–±–µ–ª–∞–º–∏
                            </small>
                        </div>
                        <button class="btn btn-primary" onclick="startBicepsUpgrade()" id="biceps-start-btn">
                            <span id="biceps-btn-text">üí™ –ù–∞—á–∞—Ç—å</span>
                        </button>
                        <button class="btn btn-danger" onclick="stopBicepsProcessing()" id="biceps-stop-btn" style="display: none; margin-top: 10px;">
                            <span>‚èπÔ∏è –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</span>
                        </button>
                        <div class="biceps-results" id="biceps-results" style="display: none; margin-top: 15px;">
                            <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:</h3>
                            <div id="biceps-results-content"></div>
                        </div>
                    </div>
                </section>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∞: –ê—Ç–∞–∫–∞ –±–æ—Å—Å–æ–≤ -->
            <div class="tab-content" id="tab-boss-attack" style="display: none;">
                <!-- –†–∞–∑–¥–µ–ª –±–æ—Å—Å–∞ -->
                <section class="card" id="boss-section">
                    <h2>üëπ –ë–æ—Å—Å</h2>
                    <div class="boss-info" id="boss-info">
                        <p>–ó–∞–≥—Ä—É–∑–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏...</p>
                    </div>
                    <button class="btn btn-primary" onclick="refreshBossInfo()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
                </section>

                <!-- –†–∞–∑–¥–µ–ª –≤—ã–±–æ—Ä–∞ –±–æ—Å—Å–æ–≤ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∞—Ç–∞–∫–∏ -->
                <section class="card" id="boss-select-section">
                    <h2>üéØ –í—ã–±–æ—Ä –±–æ—Å—Å–æ–≤ –¥–ª—è –∞—Ç–∞–∫–∏</h2>
                    <div class="boss-select-controls">
                        <div id="boss-list-container" style="margin-top: 15px;">
                            <p class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –±–æ—Å—Å–æ–≤...</p>
                        </div>
                        <button class="btn btn-secondary" onclick="loadBossList()" id="reload-boss-list-btn" style="margin-top: 10px;">
                            üîÑ –û–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ –±–æ—Å—Å–æ–≤
                        </button>
                        <button class="btn btn-primary" onclick="startBossAutoAttack()" id="start-boss-attack-btn" style="margin-top: 15px;">
                            üöÄ –ù–∞—á–∞—Ç—å –∞—Ç–∞–∫—É
                        </button>
                        <button class="btn btn-danger" onclick="stopBossAutoAttack()" id="stop-boss-attack-btn" style="margin-top: 10px; display: none;">
                            üõë –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∞—Ç–∞–∫—É
                        </button>
                        <div id="boss-attack-status" style="margin-top: 15px; display: none;">
                            <h4>–°—Ç–∞—Ç—É—Å –∞—Ç–∞–∫–∏:</h4>
                            <div id="boss-attack-status-content"></div>
                        </div>
                    </div>
                </section>
            </div>
        </main>
        
        <!-- –ö–Ω–æ–ø–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤–Ω–∏–∑—É —ç–∫—Ä–∞–Ω–∞ -->
        <div class="settings-button-container">
            <button class="btn btn-secondary" onclick="toggleSettings()" id="settings-toggle-btn">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
        </div>
    </div>
    
    <!-- –¢–∞–±–±–∞—Ä –≤–Ω–∏–∑—É —ç–∫—Ä–∞–Ω–∞ (–≤–Ω–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è) -->
    <div class="tab-bar" id="tab-bar">
        <button class="tab-button active" id="tab-btn-main" type="button">
            <span class="tab-icon">üè†</span>
            <span class="tab-label">–û—Å–Ω–æ–≤–Ω–æ–µ</span>
        </button>
        <button class="tab-button" id="tab-btn-boss-attack" type="button">
            <span class="tab-icon">‚öîÔ∏è</span>
            <span class="tab-label">–ê—Ç–∞–∫–∞ –±–æ—Å—Å–æ–≤</span>
        </button>
    </div>

    <!-- –ö–∞—Å—Ç–æ–º–Ω–æ–µ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å —Ç–µ–º–Ω—ã–º —Ñ–æ–Ω–æ–º -->
    <div id="custom-modal" class="custom-modal" style="display: none;">
        <div class="custom-modal-overlay" onclick="closeCustomModal()"></div>
        <div class="custom-modal-content">
            <div class="custom-modal-body" id="custom-modal-body">
                <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ -->
            </div>
            <div class="custom-modal-footer">
                <button class="btn btn-primary" onclick="closeCustomModal()">OK</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
